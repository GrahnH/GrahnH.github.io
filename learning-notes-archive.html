<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Notes Archive</title>
    
    <link rel="stylesheet" href="style.css"> 
    <style>
       
        .archive-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .archive-header {
            font-size: 2.2em;
            color: var(--accent-color);
            border-bottom: 2px solid var(--hover-border);
            padding-bottom: 10px;
            margin-bottom: 30px;
            margin-top: 0;
            font-weight: 700;
        }

        .note-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .note-item {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px var(--shadow-color);
            transition: all 0.2s;
            border-left: 5px solid var(--accent-color);
        }

        .note-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        .note-title a {
            font-size: 1.25em;
            font-weight: 600;
            color: var(--text-main);
            text-decoration: none;
            transition: color 0.2s;
        }

        .note-title a:hover {
            color: var(--accent-color);
        }

        .note-meta {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .note-content {
            font-size: 0.95em;
            color: var(--text-secondary);
            margin-top: 10px;
            line-height: 1.5;
        }

        .tag-list span {
            display: inline-block;
            background: var(--preview-bg);
            color: var(--accent-color);
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.75em;
            margin-right: 5px;
            margin-top: 5px;
        }

        /* 响应式调整 */
        @media (max-width: 600px) {
            .archive-container {
                padding: 10px;
            }
            .archive-header {
                font-size: 1.8em;
            }
            .note-title a {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="archive-container">
        <!-- Back Button - Assuming a basic style from previous files -->
        <div style="margin-bottom: 25px;">
            <a href="index.html" style="text-decoration: none; color: var(--accent-color); font-weight: 600; display: inline-flex; align-items: center; gap: 5px;">
                <!-- Using a simple Unicode arrow since Lucide might not be loaded here -->
                &larr; Back to Home
            </a>
        </div>

        <h1 class="archive-header">Learning Notes Archive (All Entries)</h1>

        <!-- Search and Filter (Placeholder for future feature) -->
        <div style="margin-bottom: 25px;">
            <input type="text" id="archiveSearchInput" placeholder="Search all archived notes..." class="search-input">
        </div>
        
        <!-- List of Notes will be injected here -->
        <div class="note-list" id="notesArchiveList">
            <!-- JavaScript will render notes here -->
            <p style="text-align: center; color: var(--text-secondary);" id="loadingMessage">Loading notes...</p>
        </div>
        
        <div style="text-align: center; margin-top: 30px; color: var(--text-label); font-style: italic;" id="noResultsMessage" hidden>
            No notes found matching your criteria.
        </div>
    </div>

    <!-- 1. Learning Notes Data -->
    <script src="learning-notes-data.js"></script>
    <!-- 2. Main Logic Script -->
    <script>
        // Note: For simplicity, the full dark mode initialization from script.js 
        // is not replicated here, but the CSS variables should still work based on index.html's state.

        document.addEventListener('DOMContentLoaded', function() {
            const notes = window.learningNotesData || [];
            const listContainer = document.getElementById('notesArchiveList');
            const searchInput = document.getElementById('archiveSearchInput');
            const loadingMessage = document.getElementById('loadingMessage');
            const noResultsMessage = document.getElementById('noResultsMessage');

            // Function to render the list of notes
            function renderNotesList(notesToRender) {
                if (loadingMessage) loadingMessage.hidden = true;
                
                if (notesToRender.length === 0) {
                    listContainer.innerHTML = '';
                    noResultsMessage.hidden = false;
                    return;
                }

                noResultsMessage.hidden = true;
                
                // Sort by date (newest first)
                const sortedNotes = [...notesToRender].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                let html = '';
                sortedNotes.forEach(note => {
                    const tagsHtml = note.tags.map(tag => `<span>${tag}</span>`).join('');
                    
                    html += `
                        <div class="note-item">
                            <div class="note-title">
                                <a href="${note.link}">${note.title}</a>
                            </div>
                            <div class="note-meta">
                                ${note.date}
                            </div>
                            <div class="note-content">
                                ${note.content}
                            </div>
                            <div class="tag-list">
                                ${tagsHtml}
                            </div>
                        </div>
                    `;
                });

                listContainer.innerHTML = html;
            }

            // Initial render
            renderNotesList(notes);

            // Search functionality (simple filtering)
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const query = this.value.toLowerCase().trim();
                    if (query.length === 0) {
                        renderNotesList(notes); // Show all if query is empty
                        return;
                    }
                    
                    const filteredNotes = notes.filter(note => 
                        note.title.toLowerCase().includes(query) ||
                        note.content.toLowerCase().includes(query) ||
                        (note.tags && note.tags.some(tag => tag.toLowerCase().includes(query)))
                    );
                    
                    renderNotesList(filteredNotes);
                });
            }
        });
    </script>
</body>
</html>
